# Linux Shell Scripting Basics
## What is a Linux shell?
Linux shell is a program that provides an interface for the user to use operating system services. It interpretes the commands from users and passes them to Linux kernel to execute. 
- shell - the command interpreter (e.g. bash)
- terminal - application where you type the commands

## What is a shell script?
A shell script is a text file containing shell commands. When executed, the shell reads the file and runs each command.

Shell scripts 
  - are used to automate repetitive tasks which saves time and reduces errors
  - make it easy to link different commands together.

Example:  
```nano helloworld.sh```  

```#!/bin/bash      # this tells the system which shell to use to interpret the script```  
```echo "Hello, world!"```  

How to run a shell script?
1.  make the script executable:
   
```ls -l helloworld.sh```  
```-rw-rw-r-- 1 testuser testuser   34 20. 9. 16:07 helloworld.sh```  

```chmod ugo+x helloworld.sh```  
```ls -l helloworld.sh```    
```-rwxrwxr-x 1 testuser testuser   34 20. 9. 16:07 helloworld.sh```  

__notice__:  
 - x permission - it is possible to run the script.
 - r permission - it is possible to view the contents of the script.
 - w permission - it is possible to modify the script.  

2. run the script:

```pwd```  
```/home/testuser```  

```helloworld.sh```  
```bash: helloworld.sh: command not found```  
Bash tries to find an executable named ```helloworld.sh``` in the directories listed in environment variable ```$PATH```.  
```echo $PATH```  
```/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games```  

Because user's home directory is not in that list the location of the script has to be told explicitly:  

```./helloworld.sh```  
```Hello, world!```  

- ```.``` means 'this directory'
- ```/``` is the path separator
- ```./helloworld.sh``` means run the script in this directory 

__Notice__: ```bash helloworld.sh``` works because in this case you are starting a new bash process (a subshell) that is in the ```$PATH``` (```/bin```), this subshell executes the script that located in the current working directory and terminates a subshell when the script finishes.  

__Notice2__: environment variable ```$PATH``` is usually __not__ changed. As an exception user specific ```$HOME/bin/``` may be added:
   ```export PATH="$PATH:$HOME/bin"```  
   To make this permanent it has to be added into ```.bashrc``` file.  
   ```sudo cp .bashrc .bashrc.orig```  
   ```echo 'export PATH="$PATH:$HOME/bin"' >> ~/.bashrc```  
__Notice3__: If you create a script that everybody should be able to run copy it to ```/usr/local/bin/```  

## Variables and Input  

A variable in shell scripting is a name that stores a value. To create a variable, use the following syntax: 
```VARIABLE_NAME=VALUE```  

Example: ```username=testuser``` creates a variable ```username``` and assigns value ```testuser``` to it.  

Notice:  
 - variable names are case sensitive, ```name``` and ```Name``` are two different variables.  
 - if the value is more than one word use quotes:  ```greeting='How are you?'```  
 - To refer a variable use the dollar sign ($), for example:  
       ```username=testuser```  
       ```echo $username```  
       ```testuser```  
 - without $ the outcome is the name of the variable.  
       ```echo username```  
       ```username```  


Example: ```listvariables.sh```  
   ```
   #!/bin/bash
   var1=1
   var2=2
   var3=3
   echo The first three numbers are $var1 $var2 and $var3

   ./listvariables.sh
   The first three numbers are 1 2 and 3
   ```  

It is also possible to pass variables as command line arguments: ```list3numbers.sh```   
   ```
   #!/bin/bash
   var1=$1
   var2=$2
   var3=$3
   echo Three numbers are $var1 $var2 $var3

   ./list3numbers.sh 56 37 3
   Three numbers are 56 37 3

   ./list3numbers.sh
   Three numbers are 
   ```  

Asking input from user is also an option: ```hello.sh```  
```
   #!/bin/bash  
   read -p "Who are you? " name  
   echo "Hello, $name"  

   ./hello.sh
   Who are you? testuser
   Hello, testuser

   ```  

## Conditional Statements: if-then-else

```
if [condition]; then   
  commands if condition is true    
else   
  commands if condition is false  
fi  
```  

Condition can be for example:  
- -eq - Equal
- -gt - Greater than
- -lt - Less than
- -n - not empty  


Example: Package Update Notifier  
```
#!/bin/bash

# Update package list - very quiet mode
sudo apt-get update -qq

# Check for upgradable packages, do not install
updates=$(sudo apt-get --just-print upgrade | grep "^Inst")

# check whether variable updates is empty (-n means 'not empty')
if [ -n "$updates" ]; then
  echo "Updates available:"
  echo "$updates"
else
  echo "System is up to date."
fi
```
```
./updateNotifier.sh 
Updates available:  
Inst base-files [13.8] (13.8+deb13u1 Debian:13.1/stable [amd64])  
Inst init-system-helpers [1.68] (1.69~deb13u1 Debian:13.1/stable [all])  
Inst init [1.68] (1.69~deb13u1 Debian:13.1/stable [amd64])  
. . .  

./updateNotifier.sh  
System is up to date.  

```  

## Loops 
For loop:  
```  
for [condition]; do    
    commands  
done  
```  
While loop:  
```  
while [condition]; do  
    commands  
done  
```  

Example1: Print numbers 1 to 10  
```  
#!/bin/bash  

for i in {1..10}; do  
  echo "Number: $i"  
done  
```
```  
./printnumbers.sh 
Number: 1  
Number: 2  
Number: 3  
Number: 4  
Number: 5  
Number: 6  
Number: 7  
Number: 8  
Number: 9  
Number: 10
```  

Example2 - infinitive loop:  
```
#!/bin/bash  

while true; do  
  echo "Current time: $(date)"  
  sleep 5  
done  
```
  
```  
./infinitiveloop.sh   
Current time: to 25.9.2025 12.17.10 +0300  
Current time: to 25.9.2025 12.17.15 +0300  
Current time: to 25.9.2025 12.17.20 +0300  
. . .
```  

# Python in Linux  
Python3 is installed as default in Debian13:  
```python3 --version```  
```Python 3.13.5```   
If you want to use ```python``` as shortcut:    
```sudo apt-get install python-is-python3```    
```testuser@test-linux:~$ python --version```  
```Python 3.13.5```  


For learning and development IDLE (Pythonâ€™s Integrated Development and Learning Environment) can be used: https://docs.python.org/3/library/idle.html  
```  
testuser@test-linux:~$ python  
Python 3.13.5 (main, Jun 25 2025, 18:55:22) [GCC 14.2.0] on linux  
Type "help", "copyright", "credits" or "license" for more information.  
>>> print('hello')  
hello  
>>>   
testuser@test-linux:~$  
```  
Use ```ctrl-D``` to exit IDLE.  

Example: Log the current time to a file automatically  
```
log_time.py

#!/usr/bin/env python3     # tells the system to use Python 3 to run the script  
from datetime import datetime      # imports the datetime class from datetime module   

with open("/home/testuser/time.log", "a") as f:      # opens the file time.log in append mode  
    f.write(f"Logged at {datetime.now()}\n")         # writes a line to the file  
```
Make python script executable:  
```chmod +x log_time.py```  

Create a cronjob to run this every minute. Open crontab:  
```crontab -e```  

Add this line to run the script every minute:  
```* * * * * /home/testuser/log_time.py```   

The ```time.log``` file will grow in real time:  
```tail -f /home/testuser/time.log```  

Note: after testing is done remove the cronjob. 

Python code is executed line-by-line by the Python interpreter. No need to compile the code before running it.  

# C in Linux
C compiler in linux GCC (GNU Compiler Collection) is available in Debian13 but is not installed as default on minimal setups. To install it  
```sudo apt-get update```  
```sudo apt-get install build-essential```  

C compiler:  
```gcc --version```  
```gcc (Debian 14.2.0-19) 14.2.0```  

C++ compiler:  
```g++ --version```  
```g++ (Debian 14.2.0-19) 14.2.0```  

Example:  
```  
hello.cpp  

#include <iostream>  
int main() {  
    std::cout << "Hello, C++ World!" << std::endl;  
    return 0;  
}  
```
Compile with g++  
```g++ hello.cpp -o hello```    

Run  
```./hello```  
```Hello, C++ World!```  

C/C++ code need to be compiled and the compiled binary is then run.  

# Linux Automation  
Automating routine tasks is essential when trying to increase the efficiency, reliability, consistency and scalability of the system. Linux automation can vary from simple shell sripting to complex configurations. Common Linux automation tools:    
 - __shell scripts__ - can be used for example to backup important files on a regular basis. Script can perform this task regularly and automatically if scheduled to run as a cron job.  
 - __configuration management tools__ like ansible can be used to create the initial server setup (users, groups, ssh keys, sudo access etc.), install the required software packages, start required services, security hardening (fw rules, disable root login etc.), install monitoring agents, configure log rotation and many other tasks.  
 - __provisioning tools__ like terraform (Infrastructure as a code, IaC) can be used for example in cloud deployments to provision the virtual machines.  


## Linux in Cloud  
Different types of cloud service providers offer Linux hosts as a service. The selection of cloud provider depends on the use case. Here are some aspects to be considered:

| Feature   | Smaller Cloud Provider |  Hyperscaler |  
| -------- | ---------------------- | -------------|  
| Target audience  | startups, developers   | enterprises |  
| Ease of use        | simple UI, beginner friendly   | steeper learning curve, enterprise grade tools|  
|Pricing| transparent, low cost, flat monthly fee   | pay-as-you-go, saving plans    |  
| Services  | basic IaaS  | hundreds of IaaS/PaaS/SaaS services |  
| Use cases  | web apps, blogs, dev environments | scalable enterprise applications, global services|  



